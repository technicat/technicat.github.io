---
layout: post
title: Finger Gestures
date: '2012-05-21T16:38:06-07:00'
tags: []
tumblr_url: https://fugugames.tumblr.com/post/110515861706/finger-gestures
---
<p>I guess sales really work. I bought the Finger Gestures package during the Unity Asset Store sale, figuring I was going to buy it eventually, anyway. I just got around to trying it out, on my <a href="http://itunes.apple.com/us/app/elektra-dance/id298043398">Elektra Dance</a> app (updated on Android, we&rsquo;ll see if Apple takes it), which has been getting by with the original standard assets MouseOrbit script for camera control. It works, but not quite right.</p>

<p>So I installed Finger Gestures, dragged the initializer prefab into the scene, and just added callbacks for finger down/up/move to the MouseOrbit script (the first few lines are in the Start function, registering the callbacks), and using the &ldquo;delta&rdquo; values in LateUpdate instead of the Input values that worked with the mouse. The new behavior is actually a bit fancier - since I don&rsquo;t reset the delta values in the finger up callback, when you release after a swipe, the camera keeps orbiting, giving you a swipe and spin effect. It could use some refinement, as when you swipe with multiple fingers it goes crazy, but I kind of like the resulting manic disco dancing.</p>

<p>In this case, it probably wouldn&rsquo;t have been difficult to accomplish the same thing accessing Unity&rsquo;s Input.touches directly, but then you end up trying to implement a state machine inside an input detection loop. With callbacks like this, it&rsquo;s simpler and clearer. What I&rsquo;d really like to make use of is the rotation gesture detection. Maybe a gymnastics app?</p>



<p>FingerGestures.OnFingerDown += OnFingerDown;<br/>
FingerGestures.OnFingerUp += OnFingerUp;<br/>
FingerGestures.OnFingerMove += OnFingerMove;<br/>
}</p>

<p>private var lastpos:Vector2;<br/>
private var finger:int=-1;</p>

<p>function OnFingerDown(index:int, pos:Vector2) {<br/>
lastpos = pos;<br/>
deltax = 0;<br/>
deltay=0;<br/>
finger = index;<br/>
}</p>

<p>function OnFingerUp(index:int, pos:Vector2) {<br/>
lastpos = pos;<br/>
finger = -1;<br/>
// deltax = 0;<br/>
// deltay=0;<br/>
}</p>

<p>private var deltax:float = 0;<br/>
private var deltay:float = 0;</p>

<p>function OnFingerMove (index:int, pos:Vector2) {<br/>
if (finger == index) {<br/>
deltax = pos.x-lastpos.x;<br/>
deltay = pos.y-lastpos.y;<br/>
lastpos = pos;<br/>
}<br/>
}</p>

<p>function LateUpdate() {<br/>
if (target) {<br/>
x += deltax * xSpeed * 0.02;<br/>
y -= deltay * ySpeed * 0.02;</p>
